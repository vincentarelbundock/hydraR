---
title: "Override"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Override}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

Overrides let you change config values on the fly at compose time without editing YAML files. In this vignette, we use one base config file for every example:

```yaml
author:
  given: Vincent
  family: Arel-Bundock
numeric: 2
```

A copy of this config file is distributed with the `hydraR` package. It is stored in a local directory that we can identify with `system.file()`.

```r
system.file("examples", package = "hydraR")

[1] "/path/to/R/library/hydraR/examples"
```

To avoid repeating the full config directory path and config name every time we
call `compose()`, we set global options once at the start.

```{r setup}
library(hydraR)
options(
  hydraR.compose.config_path = system.file("examples", package = "hydraR"),
  hydraR.compose.config_name = "minimal"
)
```

## No Overrides

```{r}
cfg <- compose()
print(cfg)
```

## Replace: `key=value`

```{r}
cfg <- compose(
  overrides = c("numeric=3", "author.given=Alice")
)
print(cfg)
```

## Add: `+key=value`

```{r}
cfg <- compose(
  overrides = c("+experiment.name=baseline", "+experiment.seed=42")
)
print(cfg)
```

## Upsert: `++key=value`

Upsert means update a value if the key exists, or insert it if the key does not exist.

```{r}
cfg <- compose(
  overrides = c("++numeric=5", "++experiment.tag=trial")
)
print(cfg)
```

## Remove: `~key`

```{r}
cfg <- compose(
  overrides = c("~author.family")
)
print(cfg)
```

## Combine Multiple Overrides

```{r}
cfg <- compose(
  overrides = c(
    "numeric=4",
    "+experiment.name=stress",
    "++author.middle=A.",
    "~author.family"
  )
)
print(cfg)
```
